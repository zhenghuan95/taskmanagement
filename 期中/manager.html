<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>管理员界面</title>
    <meta name="description" content="My Bmob App">
    <meta name="viewport" content="width=device-width">
    <script type="text/javascript" src="lib/bmob-min.js"></script>
    <script type="text/javascript" src="lib/jquery.min.js"></script>
    <script type="text/javascript" src="lib/bmob.js"></script>
    <script type="text/javascript" src="lib/bmobSocketIo.js"></script>
    <script type="text/javascript" src="lib/bmobSocketIo-min.js"></script>

    <style>
        body {
            height: 100%;
            background-image: url(0.jpg);
        }

        #left {
            width: 15%;
            height: 70%;
            margin-top: 5%;
            background-color: rgba(36, 41, 44, 0.75);
            float: left;
            margin-left: 15%;
        }

        .tableleft {
            width: 100%;
            color: white;
            position: relative;
        }

        #table2 {
            width: 100%;
            border-collapse: collapse;
            font-family: 楷体;
            font-size: 17px;
        }

        #tr1 {
            height: 40px;
        }

        #th1 {
            width: 100%;
            height: 120px;
            font-size: 20px;
            font-family: 华文楷体;
            background-color: rgba(19, 19, 19, 0.75);
            border-bottom: rgba(68, 69, 71, 0.66) 1px solid;
        }

        #img0 {
            width: 30px;
            height: 30px;
        }

        #img20 {
            width: 30px;
            height: 30px;
            margin-right: 30px;
        }

        #td200 {
            height: 70px;
            border-bottom: rgba(68, 69, 71, 0.66) 1px solid;
            width: 50%;
        }

        #td20 {
            height: 70px;
            border-bottom: rgba(68, 69, 71, 0.66) 1px solid;
            width: 50%;
        }

        #td210 {
            height: 50px;
            border-bottom: rgba(68, 69, 71, 0.66) 1px solid;

        }

        #td21 {
            height: 50px;
            border-bottom: rgba(68, 69, 71, 0.66) 1px solid;

        }

        #td22 {
            height: 50px;
            border-bottom: rgba(68, 69, 71, 0.66) 1px solid;
        }

        #td222 {
            height: 50px;
            border-bottom: rgba(68, 69, 71, 0.66) 1px solid;
        }

        #td23 {
            height: 180px;
            /*border-bottom: #6CA6CD 1px solid;*/
        }

        #right {
            width: 55%;
            height: 70%;
            margin-top: 5%;
            background-color: rgba(58, 63, 67, 0.75);
            float: left;
        }

        #table3 {
            height: 100%;
            width: 100%;
            background-color: white;
        }

        #tr3 {
            /*height: 80%;*/
            background-color: #F5F5F5;
        }

        #table40 {
            height: 450px;
            width: 500px;
            background-color: white;
            /*margin:0 auto;*/
            /*margin-top: 10px;*/
            position: relative;
            top: 30px;
            left: 160px;
            /*border-collapse: collapse;*/
            font-family: 楷体;
        }

        #tr40 {
            height: 40px;
            color: white;
            background-color: rgba(60, 60, 62, 0.66);
            text-align: center;
            font-size: 17px;
        }

        #input1 {
            width: 180px;
            height: 30px;
        }

        #input2 {
            width: 180px;
            height: 100px;
            margin-top: 8px;
            margin-bottom: 8px;
        }

        #input3 {
            width: 180px;
            height: 30px;
        }

        #input4 {
            width: 200px;
            height: 40px;
            background-color: rgba(11, 13, 8, 0.75);
            border-radius: 15px;
            color: white;
            font-size: 18px;
            font-family: 楷体;
        }

        #table41 {
            width: 700px;
            background-color: white;
            /*margin:0 auto;*/
            /*margin-top: 10px;*/
            position: relative;
            top: 30px;
            left: 60px;
            border-collapse: collapse;
            font-family: 楷体;
        }

        #table41 td {
            height: 50px;
            border-bottom: rgba(68, 69, 71, 0.66) 1px solid;
        }

        #tr41 {
            height: 40px;
            color: white;
            background-color: rgba(60, 60, 62, 0.66);
            text-align: center;
            font-size: 17px;
        }

        #div21 {
            float: right;
            padding-right: 15px;
            padding-top: 2px;
        }

        #input22 {
            width: 60px;
            height: 25px;
            background-color: rgba(11, 13, 8, 0.75);
            border-radius: 15px;
            color: white;
            font-size: 18px;
            font-family: 楷体;
        }

        #input23 {
            width: 60px;
            height: 25px;
            background-color: rgba(11, 13, 8, 0.75);
            border-radius: 15px;
            color: white;
            font-size: 18px;
            font-family: 楷体;
        }

        #table42 {
            width: 700px;
            background-color: white;
            /*margin-top: 10px;*/
            position: relative;
            top: 30px;
            left: 60px;
            border-collapse: collapse;
            font-family: 楷体;
        }

        #table42 td {
            height: 50px;
            border-bottom: rgba(68, 69, 71, 0.66) 1px solid;
        }

        #tr42 {
            height: 40px;
            color: white;
            background-color: rgba(60, 60, 62, 0.66);
            text-align: center;
            font-size: 17px;
        }

        #table43 {
            height: 450px;
            width: 500px;
            background-color: white;
            /*margin:0 auto;*/
            /*margin-top: 10px;*/
            position: relative;
            top: 30px;
            left: 160px;
            /*border-collapse: collapse;*/
            font-family: 楷体;
        }

        #tr43 {
            height: 40px;
            color: white;
            background-color: rgba(60, 60, 62, 0.66);
            text-align: center;
            font-size: 17px;
        }

        #input43 {
            width: 180px;
            height: 30px;
        }

        #input44 {
            width: 200px;
            height: 40px;
            background-color: rgba(11, 13, 8, 0.75);
            border-radius: 15px;
            color: white;
            font-size: 18px;
            font-family: 楷体;
        }

        #tr42 {
            height: 40px;
            color: white;
            background-color: rgba(60, 60, 62, 0.66);
            text-align: center;
            font-size: 17px;
        }

        #table23 {
            height: 450px;
            width: 500px;
            background-color: white;
            /*margin:0 auto;*/
            /*margin-top: 10px;*/
            position: relative;
            top: 30px;
            left: 160px;
            /*border-collapse: collapse;*/
            font-family: 楷体;
        }

        #tr23 {
            height: 40px;
            color: white;
            background-color: rgba(60, 60, 62, 0.66);
            text-align: center;
            font-size: 17px;
        }

        #input231 {
            width: 180px;
            height: 30px;
        }

        #input232 {
            width: 180px;
            height: 30px;
        }

        #input233 {
            width: 180px;
            height: 30px;
        }

        #input234 {
            width: 200px;
            height: 40px;
            background-color: rgba(11, 13, 8, 0.75);
            border-radius: 15px;
            color: white;
            font-size: 18px;
            font-family: 楷体;
        }

        a {
            text-decoration: none
        }

        a:link {
            color: #A8A8A8
        }

        /* 未访问的链接 */
        a:visited {
            color: #A8A8A8
        }

        /* 已访问的链接 */
        a:hover {
            color: #0000FF
        }

        /* 鼠标移动到链接上 */
        a:active {
            color: #0000FF
        }

        .active {
            background-color: rgba(25, 29, 32, 0.75);
        }
    </style>
</head>
<body>
<div id="left">
    <table class="tableleft">
        <tr>
            <th>
                <table id="table2">
                    <tr id="tr1">
                        <th id="th1" colspan="2">
                            <div><img src="top.png" id="img0"></div>
                            <div>工作任务管理系统</div>
                        </th>
                    </tr>
                    <tr>
                        <td id="td200" align="right"><img src="man.png" id="img20"></td>
                        <td id="td20" align="left"></td>
                    </tr>
                    <tr>
                        <td id="td210" colspan="2" onclick="add()" name="change" class="active">添加任务</td>
                    </tr>
                    <tr>
                        <td id="td21" colspan="2" onclick="task()" name="change">任务管理</td>
                    </tr>
                    <tr>
                        <td id="td22" colspan="2" onclick="staff()" name="change">人员信息</td>
                    </tr>
                    <tr>
                        <td id="td222" colspan="2" onclick="people()" name="change">个人信息</td>
                    </tr>
                    <tr>
                        <td id="td23" colspan="2"></td>
                    </tr>
                </table>
            </th>

        </tr>
    </table>
</div>
<div id="right">
    <table id="table3">
        <tr>
            <td id="time1" style="color:  rgba(60, 60, 62, 0.66);font-size: 5px;height: 40px;width: 750px"
                align="right"></td>
            <td style="font-size: 5px;padding-left: 5px"><a href="index.html">[退出]</a></td>
        </tr>
        <tr id="tr3">
            <th style="height:536px ;padding: 0" colspan="2">
                <div style="display:inline-block;height: 538px; width: 823px; " id="div0">
                    <form id="formid">
                        <table id="table40" style="table-layout:fixed">
                            <tr id="tr40">
                                <th colspan="2">添加任务</th>

                            </tr>
                            <tr>
                                <td width="50px">姓名</td>
                                <td>
                                    <select id="input1">
                                        <option></option>
                                        <option value=""></option>
                                    </select>
                                </td>
                                <!--<td><input type="text" placeholder="请选择姓名" id="input1" value=""></td>-->
                            </tr>
                            <tr>
                                <td width="50px">任务</td>
                                <td><input type="text" placeholder="请输入新任务" id="input2" value=""></td>
                            </tr>
                            <tr>
                                <td width="50px">截止日期</td>
                                <td><input type="date" id="input3" value=""></td>
                            </tr>
                            <tr>
                                <th colspan="2">
                                    <input type="button" value="提交" id="input4" onclick="clickHandler()">
                                </th>
                            </tr>

                        </table>
                    </form>
                </div>
                <div style="display: none ; overflow-y: scroll;height: 538px; width: 823px; " id="div1">
                    <table id="table41" style="table-layout:fixed;">
                        <tr id="tr41">
                            <th width="80px">序号</th>
                            <th width="90px">姓名</th>
                            <th>任务</th>
                            <th width="80px">状态</th>
                            <th>截止时间</th>
                            <th width="90px">
                            </th>
                        </tr>
                        <tbody id="tbody">
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        </tbody>

                    </table>
                </div>
                <div style="display:none;overflow-y: scroll;height: 538px; width: 823px; " id="div2">
                    <div id="div21"><input type="button" onclick="disp_prompt()" value="添加" id="input22"/><input
                            type="button" onclick="back()" value="返回" id="input23"/></div>
                    <div id="div23" style="display:none;">
                        <form>
                            <table id="table23" style="table-layout:fixed">
                                <tr id="tr23">
                                    <th colspan="2">人员添加</th>
                                </tr>
                                <tr>
                                    <td width="50px">姓名</td>
                                    <td><input type="text" id="input231" value=""></td>
                                </tr>
                                <tr>
                                    <td width="50px">部门</td>
                                    <td><input type="text" id="input232" value=""></td>
                                </tr>
                                <tr>
                                    <td width="50px">权限</td>
                                    <td>
                                        <select id="input233">
                                            <option value="staff">staff</option>
                                            <option value="manager">manager</option>
                                        </select>
                                        <!--<input type="text" id="input233" value="">-->
                                    </td>
                                </tr>
                                <tr>
                                    <th colspan="2">
                                        <input type="button" value="添加" id="input234" onclick="clickPeople()">
                                    </th>
                                </tr>

                            </table>
                        </form>
                    </div>
                    <div id="div22" style="display:block;overflow-y: scroll;height: 490px;width: 823px;">
                        <table id="table42">
                            <tr id="tr42">
                                <th width="60px">序号</th>
                                <th width="200px">姓名</th>
                                <th width="200px">部门</th>
                                <th width="200px">职能</th>
                            </tr>
                            <tbody id="tbody2">
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div style="display:none;height: 538px; width: 823px; " id="div3">
                    <form id="formid1">
                        <table id="table43" style="table-layout:fixed">
                            <tr id="tr43">
                                <th colspan="2">信息修改</th>

                            </tr>
                            <tr>
                                <td width="50px">姓名</td>
                                <td id="td41">
                                </td>
                            </tr>
                            <tr>
                                <td width="50px">邮箱</td>
                                <td id="td42"></td>
                            </tr>
                            <tr>
                                <td width="50px">修改密码</td>
                                <td><input type="text" id="input43" value=""></td>
                            </tr>
                            <tr>
                                <th colspan="2">
                                    <input type="button" value="确认修改" id="input44" onclick="clickHand()">
                                </th>
                            </tr>

                        </table>
                    </form>
                </div>
            </th>
        </tr>
    </table>
</div>

<script type="text/javascript">
    Bmob.initialize("b7a879f19d40ea814b100492cf686dab", "e828abe9385f66a5d290d5b4f0a5619a");


    var sid = localStorage.getItem('uname');
    //document.write('传递过来的id是：'+sid);
    document.getElementById("td20").innerHTML = sid;
    document.getElementById("td41").innerHTML = sid;

    //本地时间
    function mytime() {
        var a = new Date();
        var b = a.toLocaleTimeString();
        var c = a.toLocaleDateString();
        document.getElementById("time1").innerHTML = c + "&nbsp" + b;
    }
    setInterval(function () {
        mytime()
    }, 1000);//刷新

    function disp_prompt() {
        document.getElementById('div22').style.display = "none";
        document.getElementById('div23').style.display = "block";
    }
    function back() {
        document.getElementById('div22').style.display = "block";
        document.getElementById('div23').style.display = "none";

        var GameScore = Bmob.Object.extend("department");
        var query = new Bmob.Query(GameScore);
        // 查询所有数据
        query.find({
            success: function (results) {
//                alert("共查询到 " + results.length + " 条记录");
                // 循环处理查询到的数据
                var str = "<table>";
                for (var i = 0; i < results.length; i++) {
                    var object = results[i];
                    var uname = object.get('uname');
                    var job = object.get('job');
                    var dname = object.get('dname');
                    var num = i + 1;
//                    alert(i + ' - ' + uname + ' - ' + content+ ' - ' + condition);
                    str += "<tr><td>" + num + "</td><td>" + uname + "</td><td>" + dname + "</td><td>" + job + "</td></tr>";
                    document.getElementById("tbody2").innerHTML = str;
                }
                str += "</table>";
            },
            error: function (error) {
                alert("查询失败: " + error.code + " " + error.message);
            }
        })

    }
    function clickPeople() {
        var uname = document.getElementById("input231").value;
        var dname = document.getElementById("input232").value;
        var job = document.getElementById("input233").value;
        if (uname == "") {
            alert("姓名不能为空");
            return false;
        }
        if (dname == "") {
            alert("部门不能为空");
            return false;
        }
        if (job == "") {
            alert("权限不能为空");
            return false;
        }
        else {
            var GameScore = Bmob.Object.extend("department");
            var gameScore = new GameScore();
            gameScore.set("uname", uname);
            gameScore.set("dname", dname);
            gameScore.set("job", job);
            gameScore.save(null, {
                success: function (object) {
                    console.log("添加成功");
                    alert(uname + "添加成功");
                },
                error: function (model, error) {
                    alert('添加数据失败，返回错误信息：' + error.message);
                }
            });
        }
//        window.self.location.reload();

    }
    //功能切换
    function add() {
        var but = document.getElementsByName('change');
//        console.log(but);
        for (var i = 0; i < but.length; i++) {
            but[i].className = '';//遍历清空所有按钮上的类名
        }
        document.getElementById("td210").className = 'active';//只给当前点击的按钮添加类名

        document.getElementById("div0").style.display = "inline-block";
        document.getElementById("div1").style.display = "none";
        document.getElementById("div2").style.display = "none";
        document.getElementById("div3").style.display = "none";
    }

    function task() {
        var but = document.getElementsByName('change');
//        console.log(but);
        for (var i = 0; i < but.length; i++) {
            but[i].className = '';//遍历清空所有按钮上的类名
        }
        document.getElementById("td21").className = 'active';//只给当前点击的按钮添加类名

        document.getElementById("div0").style.display = "none";
        document.getElementById("div1").style.display = "inline-block";
        document.getElementById("div2").style.display = "none";
        document.getElementById("div3").style.display = "none";
        var GameScore = Bmob.Object.extend("task");
        var query = new Bmob.Query(GameScore);
        // 查询所有数据
        query.find({
            success: function (results) {
//                alert("共查询到 " + results.length + " 条记录");
                // 循环处理查询到的数据

                var str = "<table>";
                for (var i = 0; i < results.length; i++) {
                    var object = results[i];
                    var uname = object.get('uname');
                    var content = object.get('content');
                    var condition = object.get('condition');
                    var date = object.get('date');
                    var button = "删除";
                    var num = i + 1;
                    str += "<tr><td>" + num + "</td><td>" + uname + "</td><td>" + content + "</td><td>" + condition + "</td><td>" + date + "</td><td>" + "<button class='close' name='delete' id='deleted'  onclick='deleted()'>" + button + "</button></td></tr>";
                    document.getElementById("tbody").innerHTML = str;
//                    var x=document.getElementById('table41').insertRow(-1);
//                    var y=x.insertCell(0);
//                    var z=x.insertCell(1);
//                    var p=x.insertCell(2);
//                    var q=x.insertCell(3);
//                    y.innerHTML=i;
//                    z.innerHTML=uname;
//                    p.innerHTML=content;
//                    q.innerHTML=condition;
                }
                //修改按钮的name
                var but = document.getElementsByTagName('button');
                for (i = 0; i < but.length; i++) {
                    but[i].setAttribute("name", i + 1);
                }
                str += "</table>";
            },
            error: function (error) {
                alert("查询失败: " + error.code + " " + error.message);
            }
        })
    }

    function deleted() {
        document.body.onclick = function (event) {    //获取按钮的name
            let name = event.target.name;
//            console.log(name);

            var tableObj = document.getElementById("tbody");
            //获取表格中的所有行
            var trObjArr = tableObj.rows;
//            console.log(trObjArr);
            for (var i = 0; i < trObjArr.length; i++) {
                var first = trObjArr[i].innerText[0];
                if (first == name) {
                    console.log(trObjArr[i].innerText);
                    var content = trObjArr[i].children[2].innerText;
                }
            }

            var GameScore = Bmob.Object.extend("task");
            var query = new Bmob.Query(GameScore);
            query.find({
                success: function (results) {
                    for (var i = 0; i < results.length; i++) {
                        var object = results[i];
                        var a = object.get('content');
                        var id = object.id;
                        console.log(id);
                        if (content == a) {
                            query.get(id, {
                                success: function (object) {
                                    // The object was retrieved successfully.
                                    object.destroy({
                                        success: function (deleteObject) {
                                            alert("删除成功");
                                        },
                                        error: function (GameScoretest, error) {
                                            alert("delete fail");
                                        }
                                    });
                                },
                                error: function (object, error) {
                                    alert("query object fail");
                                }
                            });
                            break;
                        }
                    }

                },
                error: function (object, error) {
                    // 查询失败
                }
            });

        }
    }


    //        var GameScore = Bmob.Object.extend("department");
    //        var query = new Bmob.Query(GameScore);
    //        // 查询所有数据
    //        query.find({
    //            success: function (results) {
    ////                console.log(results);
    ////                alert("共查询到 " + results.length + " 条记录");
    //                // 循环处理查询到的数据
    //                var str = "<select>";
    ////                var objSelectNow = document.getElementById("input0");
    ////                var inner = "<option value=''></option>";
    ////                objSelectNow.innerHTML = inner;
    ////                for (var i = 0; i < results.length; i++) {
    ////                    var object = results[i];
    ////                    let dname1 = object.get('dname');
    ////
    ////                    var objOption = document.createElement("OPTION");
    ////                    objOption.text = dname1;
    ////                    objOption.value = dname1;
    ////                    console.log(dname1);
    ////                    objSelectNow.options.add(objOption);

    //添加任务界面的员工姓名
    let uname = document.getElementById("input1").value;
    var GameScore = Bmob.Object.extend("department");
    var query = new Bmob.Query(GameScore);
    // 查询所有数据
    query.find({
        success: function (results) {

            var str = "<select>";
            for (var i = 0; i < results.length; i++) {
                var object = results[i];
                var uname = object.get('uname');
                var dname = object.get('dname');
                console.log(uname + "人员已找到");
                str += "<option>" + uname + "</option>";
                document.getElementById("input1").innerHTML = str;
                document.getElementById("input1").value = str;
            }
            str += "</select>";
        },
        error: function (error) {
            alert("查询失败: " + error.code + " " + error.message);
        }
    });


    function staff() {
        var but = document.getElementsByName('change');
//        console.log(but);
        for (var i = 0; i < but.length; i++) {
            but[i].className = '';//遍历清空所有按钮上的类名
        }
        document.getElementById("td22").className = 'active';//只给当前点击的按钮添加类名

        document.getElementById("div0").style.display = "none";
        document.getElementById("div1").style.display = "none";
        document.getElementById("div2").style.display = "inline-block";
        document.getElementById("div3").style.display = "none";

        var GameScore = Bmob.Object.extend("department");
        var query = new Bmob.Query(GameScore);
        // 查询所有数据
        query.find({
            success: function (results) {
//                alert("共查询到 " + results.length + " 条记录");
                // 循环处理查询到的数据
                var str = "<table>";
                for (var i = 0; i < results.length; i++) {
                    var object = results[i];
                    var uname = object.get('uname');
                    var job = object.get('job');
                    var dname = object.get('dname');
                    var num = i + 1;
//                    alert(i + ' - ' + uname + ' - ' + content+ ' - ' + condition);
                    str += "<tr><td>" + num + "</td><td>" + uname + "</td><td>" + dname + "</td><td>" + job + "</td></tr>";
                    document.getElementById("tbody2").innerHTML = str;
                }
                str += "</table>";
            },
            error: function (error) {
                alert("查询失败: " + error.code + " " + error.message);
            }
        })
    }

    function clickHandler() {
        var uname = document.getElementById("input1").value;
        var content = document.getElementById("input2").value;
        var date = document.getElementById("input3").value;
        if (uname == "") {
            alert("姓名不能为空");
            return false;
        }
        if (content == "") {
            alert("任务不能为空");
            return false;
        }
        if (date == "") {
            alert("时间不能为空");
            return false;
        }
        else {
            document.getElementById("formid").submit();
            //user表添加数据

            var GameScore = Bmob.Object.extend("task");
            var gameScore = new GameScore();
            gameScore.set("uname", uname);
            gameScore.set("content", content);
            gameScore.set("date", date);
            gameScore.set("condition", "未完成");
            gameScore.save(null, {
                success: function (object) {
                    console.log("新任务填写成功");
                    alert("新任务添加成功, object id:" + object.id);
                },
                error: function (model, error) {
                    alert('添加数据失败，返回错误信息：' + error.message);
                }
            })
        }

    }

    function people() {
        var but = document.getElementsByName('change');
//        console.log(but);
        for (var i = 0; i < but.length; i++) {
            but[i].className = '';//遍历清空所有按钮上的类名
        }
        document.getElementById("td222").className = 'active';//只给当前点击的按钮添加类名

        document.getElementById("div0").style.display = "none";
        document.getElementById("div1").style.display = "none";
        document.getElementById("div2").style.display = "none";
        document.getElementById("div3").style.display = "inline-block";

        //个人信息界面
        var user = Bmob.Object.extend("user");
        var query = new Bmob.Query(user);
        query.find({
            success: function (result) {
                for (var i = 0; i < result.length; i++) {
                    var object = result[i];
                    var a = object.get('uname');

                    if (sid == a) {
                        var email = object.get('email');
                        document.getElementById("td42").innerHTML = email;
                        console.log("已找到");

                        break;
                    }
                }
            },
            error: function (object, error) {
                // 查询失败
                alert("查询失败: " + error.code + " " + error.message);
            }
        });


    }

    function clickHand() {
        //个人信息界面
        var password = document.getElementById("input43").value;
        var user = Bmob.Object.extend("user");
        var query = new Bmob.Query(user);
        query.find({
            success: function (result) {
//                    alert("共查询到 " + result.length + " 条记录");
                for (var i = 0; i < result.length; i++) {
                    var object = result[i];
                    var a = object.get('uname');
//                    console.log("已找到");
                    if (sid == a) {
                        var email = object.get('email');
                        document.getElementById("td42").innerHTML = email;

                        object.set("password", password);
                        object.save(null, {
                            success: function (object) {
                                alert("修改成功");
                                window.location.reload();
                            },
                            error: function (object, error) {
                                alert("失败");
                            }
                        });
                        break;
                    }
                }
            },
            error: function (object, error) {
                // 查询失败
                alert("查询失败: " + error.code + " " + error.message);
            }
        });

    }
</script>
</body>
</html>